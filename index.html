
<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartHome App - Kamery</title>
    <link rel="manifest" href="manifest.json">
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #121212; color: white; }
        header { background: #1f1f1f; padding: 1em; text-align: center; font-size: 1.5em; }
        nav { display: flex; justify-content: space-around; background: #2c2c2c; }
        nav button { background: none; border: none; color: white; padding: 1em; font-size: 1em; }
        section { padding: 2em; }
        input, button, select { margin: 0.5em 0; padding: 0.5em; width: 100%; }
        ul { list-style: none; padding: 0; }
        li { margin: 0.5em 0; background: #1f1f1f; padding: 0.5em; display: flex; justify-content: space-between; align-items: center; }
        li button { background: red; color: white; border: none; padding: 0.3em 0.5em; }
    </style>
</head>
<body>
    <header>SmartHome Kamery</header>
    <nav>
        <button onclick="showSection('cameras')">Kamery</button>
        <button onclick="showSection('lights')">Światła</button>
        <button onclick="showSection('chat')">Czat</button>
        <button onclick="showSection('settings')">Ustawienia</button>
    </nav>
    <section id="content">
        <div id="login-section">
            <h3>Zaloguj się</h3>
            <input type="email" id="email" placeholder="Email">
            <input type="password" id="password" placeholder="Hasło">
            <button onclick="login()">Zaloguj</button>
            <button onclick="signup()">Zarejestruj się</button>
        </div>
        <div id="cameras-section" style="display:none;">
            <h3>Dodaj kamerę</h3>
            <input type="text" id="cameraName" placeholder="Nazwa kamery">
            <input type="text" id="cameraURL" placeholder="Adres IP/URL kamery">
            <select id="cameraType">
                <option value="REOLINK">REOLINK</option>
                <option value="Eufy">Eufy</option>
                <option value="Inny">Inny</option>
            </select>
            <input type="text" id="cameraLocation" placeholder="Lokalizacja (np. Ogród)">
            <button onclick="addCamera()">Dodaj kamerę</button>
            <ul id="cameraList"></ul>
        </div>
    </section>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyC_OYU82uZannlf32OU0ds3Ag1hrO96dGw",
            authDomain: "smarthome-14ef1.firebaseapp.com",
            projectId: "smarthome-14ef1",
            storageBucket: "smarthome-14ef1.firebasestorage.app",
            messagingSenderId: "69897157539",
            appId: "1:69897157539:web:3f9bb468a4053053a43816",
            measurementId: "G-F73FGLMGKQ"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        function showSection(name) {
            if (name === 'cameras') {
                document.getElementById('login-section').style.display = 'none';
                document.getElementById('cameras-section').style.display = 'block';
                loadCameras();
            }
        }

        function login() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            auth.signInWithEmailAndPassword(email, password)
                .then(() => {
                    alert('Zalogowano!');
                    showSection('cameras');
                })
                .catch(error => alert(error.message));
        }

        function signup() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            auth.createUserWithEmailAndPassword(email, password)
                .then(() => alert('Zarejestrowano!'))
                .catch(error => alert(error.message));
        }

        function addCamera() {
            const name = document.getElementById('cameraName').value;
            const url = document.getElementById('cameraURL').value;
            const type = document.getElementById('cameraType').value;
            const location = document.getElementById('cameraLocation').value;

            db.collection('cameras').add({ name, url, type, location })
                .then(() => {
                    alert('Dodano kamerę!');
                    loadCameras();
                })
                .catch(error => alert(error.message));
        }

        function deleteCamera(id) {
            db.collection('cameras').doc(id).delete()
                .then(() => {
                    alert('Usunięto kamerę!');
                    loadCameras();
                })
                .catch(error => alert(error.message));
        }

        function loadCameras() {
            const list = document.getElementById('cameraList');
            list.innerHTML = '';
            db.collection('cameras').get().then(snapshot => {
                snapshot.forEach(doc => {
                    const cam = doc.data();
                    const li = document.createElement('li');
                    li.textContent = `${cam.name} (${cam.type}) - ${cam.location}`;
                    const delBtn = document.createElement('button');
                    delBtn.textContent = 'Usuń';
                    delBtn.onclick = () => deleteCamera(doc.id);
                    li.appendChild(delBtn);
                    list.appendChild(li);
                });
            });
        }
    </script>
</body>
</html>
